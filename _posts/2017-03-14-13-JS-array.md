---
layout: post
title: "js数组操作"
date: 2017-03-19
excerpt: "JS数组常用操作方法:数组添加、删除、复制、截取、查找、排序、遍历、过滤等"
tag:
- javascript

comments: false
---


push,unshift,pop,shift,splice,slice,concat,join,sort,map,forEach,reduce


## 一、操作数组
### 1、数组的创建
<pre>
A.通过字面量形式：
空数组 		 		var arr = []
值可任意      			var arr = [1,2,3,"king",undefined,null,true,[1,23,4],{1,2,3}]
省略默认undefined 		 var arr = [1,,3];
</pre>
<pre>
B.通过构造函数Array()创建数组
	var arrayObj = new Array();　//创建一个数组
	var arrayObj = new Array([size]);　//创建一个数组并指定长度，注意不是上限，是长度
	var arrayObj = new Array([element[, element[, ...[, elementN]]]]);　//创建一个数组并赋值
</pre>
数组长度属性length具可变性。

### 2、数组的访问
<pre>
arr[i]; //获元素值
arr[i]= "newValue"; //赋新值
</pre>
### 3、数组的添加——变
- arr. push([item [item [. . . [itemN ]]]]);// 添加一个或多个新元素到数组结尾，并**返回数组长度**
- arr.unshift([item [item [. . . [itemN ]]]]);// 添加一个或多个新元素到数组开始，**返回数组长度**
- arr.splice(insertPos,,[item[, item[, ]);//插入新元素到指定位置，插入位置的元素自动后移。


#### splice() 添加/删除项目

从数组中添加/删除项目，返回**被删除项目**。

	arr.splice(index,howmany,item1,.....,itemX)



- index:必需。整数，规定添加/删除项目的位置，使用负数可从数组结尾处规定位置。
- howmany：必需。要删除的项目数量。如果设置为 0，则不会删除项目。
- item1, ..., itemX:可选。向数组添加的新项目。

*注释：请注意，splice() 方法与 slice() 方法的作用是不同的，splice() 方法会直接对数组进行修改。*
</pre>

	var arr = [1,2,3,4]
	arr.splice(2,0,"w","c")
	
	arr->[1,2,"w","c",3,4]

### 4、数组元素的删除 delete pop() shift() splice()——变

- delete arr[i]; **delete** 删除数组元素undefined位置保留，length属性不变,
- arr.pop(); //删除数组最后的元素，并**返回该元素值**
- arr.shift(); //删除数组开始元素，并**返回该元素值**，数组中元素自动前移
- arr.splice(start,count); //从指定位置删除count个元素，**数组形式返回所移除的元素**
- 可以通过设置length属性，删除数组后面的元素

### 5、数组元素的排序 sort() reverse()——变
- arrayObj.reverse(); //数组倒置，返回倒置后的数组
- arrayObj.sort(); //对数组元素排序，返回排序后数组

#### sort() 排序

用于对数组的元素进行排序。

	arr.sort([callback])

callback:可选。规定排序顺序。无回调函数，则按字母顺序对数组中的元素进行排序。


	//从小到大
	function sortNumber(a,b){
		return a - b
	}
	var arr = [1,3,2];
	arr.sort(sortNumber)
	
	-> 1,2,3
### 6、数组的截取和合并 slice() concat()——不变
arr.slice(start, [end]); //一个截取一段构成新数组,注意不包括 end 对应的元素，省end将复制start后所有元素

arr.concat([item[, item[, . . . [,itemN]]]]); //连接两个或多个数组。

	var x = [1,2,3,4,5,6];
	var y = x.slice(1,3);
	
	y -> [2,3,4];
	x -> [1,2,3,4,5,6]
concat() 方法创建并返回一个新数组，用于连接两个或多个数组。
注意：参数有数组，则连接的是数组的元素；

	var x = [1,2,3,4,5,6];
	var y = x.concat(1,[3,2]);
	
	y -> [1, 2, 3, 4, 5, 6, 1, 3, 2]

### 7、数组的拷贝 slice()——不变
- arr.slice(); 
- arr.concat(); 
### 8、数组元素的字符串化 join()——不变
arr.join(separator); //返回新的字符串，这个字符串将数组的每一个元素值连接在一起，中间用 separator 隔开。
`arr.join("|") -> "George|John|Thomas"`

toLocaleString 、toString 、valueOf：可以看作是join的特殊用法，不常用

### 9、 数组元素的遍历
1. for 循环遍历下标连续的数组
2. for-in遍历数组：

	for(index in x){console.log(""+index+x[index])}

3. arr.forEach(function(value[,index[,array]]){函数体})

	var x = [1,2,4];
	x.forEach(function(value,index,array){console.log(array[index] + " = " +value)});

前两个参数顺序与$.each([],function(index,value,array){}）相反

*注意：forEach不会遍历undefined元素，如delete后*

[Javascript 数组循环遍历之forEach](http://blog.csdn.net/oscar999/article/details/8671546)

### 10. 查找出现的元素：indexOf() lastIndexOf()
返回在该数组中**第一个找到的元素位置**，如果它不存在则返回-1。

	var arr = ['apple','orange','pear'];
	arr.indexOf("orange");  -> 1
	arr.indexOf("ore");  -> -1
	
	if( arr.indexOf("orange") != -1)

### 11. 数组元素测试函数filter()
使用指定函数测试所有元素，并创建一个包含所有通过测试的元素的新数组。

	var ages = [32, 33, 16, 40];
	function checkAdult(age) {
	    return age >= 18;
	}
	ages.filter(checkAdult);
	
	->[32, 33, 40]



### 13. 数组元素测试 every() some()

对数组中的每一项运行给定函数，测试数组元素是否通过指定函数的测试。

- every() 如果该函数对每一项返回true,则返回true，碰到一个返回false的值时候就返回false并结束运行。
- some() 如果该函数对任一项返回true，则返回true，碰到一个返回true的值时候就返回true并结束运行。


    var arr = [ 1, 2, 3, 4, 5, 6 ];  
    console.log( arr.some( function( item, index, array ){  
        console.log( 'item=' + item + ',index='+index+',array='+array );  
        return item > 3;  
    }));  
	-> true  //运行到4返回

    console.log( arr.every( function( item, index, array ){  
        console.log( 'item=' + item + ',index='+index+',array='+array );  
        return item > 3;  
    }));  
	-> false //运行到1返回
### 14、 数组元素的映射 map()
返回一个由原数组中的每个元素调用一个指定方法后的返回值组成的新数组。

	 arr.map(callback)

callback需要有return值，否则数组所有项都被映射成了undefined

	var users = [
	  {name: "张含韵", "email": "zhang@email.com"},
	  {name: "江一燕",   "email": "jiang@email.com"},
	  {name: "李小璐",  "email": "li@email.com"}
	];
	var emails = users.map(function (user) { return user.email; });
	console.log(emails.join(", "));

	-> zhang@email.com, jiang@email.com, li@email.com

### 15、 数组元素的函数累加 reduce（）
接受一个函数作为累加器，数组中的每个元值（从左到右）开始缩减，最终为一个值。

常用于数组求和，将[1,3,5,7]变成1357，利用reduce()求积等

	var x = [1,2,3];
	x.reduce(function (x, y) {
	        return x * y;
	});
	
	-> 6
## 二、数组对象的3个属性
### 1、length 属性
Length属性表示数组的长度，即其中元素的个数。因为数组的索引总是由0开始，所以一个数组的上下限分别是：0和length-1。和其他大多数语言不同的是，**JavaScript数组的length属性是可变的**，这一点需要特别注意。

- 当length属性被设置得更大时，整个数组的状态事实上不会发生变化，仅仅是length属性变大；
- 当length属性被设置得比原来小时，则原先数组中索引大于或等于length的元素的值全部被丢失。

### 2、prototype 属性
返回对象类型原型的引用。使您有能力向对象添加属性和方法。
`objectName.prototype`

	function array_max()
	{
	var i,
	max = this[0];
	for (i = 1; i < this.length; i++)
	{
	if (max < this[i])
	max = this[i];
	}
	return max;
	}
	Array.prototype.max = array_max;
	var x = new Array(1, 2, 3, 4, 5, 6);
	var y = x.max();


### 3、constructor 属性
<pre>
y = new Array();
if (y.constructor == Array) // 进行处理（条件为真）
</pre>
来源：[详解JS数组的操作大全](http://www.jb51.net/article/73598.htm)

[ES5中新增的Array方法详细说明](http://www.zhangxinxu.com/wordpress/2013/04/es5%E6%96%B0%E5%A2%9E%E6%95%B0%E7%BB%84%E6%96%B9%E6%B3%95/)

[map/reduce 廖雪峰的官方网站](http://www.liaoxuefeng.com/wiki/001434446689867b27157e896e74d51a89c25cc8b43bdb3000/001435119854495d29b9b3d7028477a96ed74db95032675000)