---
layout: post
title: "JS数组操作"
date: 2017-03-19
excerpt: ""
tag:
- JavaScript

comments: false
---


push,unshift,pop,shift,splice,slice,concat,join,sort,map,forEach,reduce


## 一、操作数组
### 1、数组的创建
	var arrayObj = new Array();　//创建一个数组
	var arrayObj = new Array([size]);　//创建一个数组并指定长度，注意不是上限，是长度
	var arrayObj = new Array([element[, element[, ...[, elementN]]]]);　//创建一个数组并赋值

要说明的是，虽然第二种方法创建数组指定了长度，但实际上所有情况下数组都是变长的，也就是说即使指定了长度为5，仍然可以将元素存储在规定长度以外的，注意：这时长度会随之改变。

### 2、数组的访问
var testGetArrValue=arrayObj[]; //获取数组的元素值

arrayObj[]= "这是新值"; //给数组元素赋予新的值
### 3、数组的添加
arrayObj. push([item [item [. . . [itemN ]]]]);// 将一个或多个新元素添加到数组结尾，并**返回数组新长度**

arrayObj.unshift([item [item [. . . [itemN ]]]]);// 将一个或多个新元素添加到数组开始，数组中的元素自动后移，**返回数组新长度**

arrayObj.splice(insertPos,,[item[, item[, . . . [,itemN]]]]);//将一个或多个新元素插入到数组的指定位置，插入位置的元素自动后移，**返回""**。

<pre>
splice() 方法向/从数组中添加/删除项目，然后**返回被删除的项目**。
arrayObject.splice(index,howmany,item1,.....,itemX)

index:必需。整数，规定添加/删除项目的位置，使用负数可从数组结尾处规定位置。
howmany：必需。要删除的项目数量。如果设置为 0，则不会删除项目。
item1, ..., itemX:可选。向数组添加的新项目。

*注释：请注意，splice() 方法与 slice() 方法的作用是不同的，splice() 方法会直接对数组进行修改。*

原arr:George,John,Thomas,James,Adrew,Martin
arr.splice(2,0,"William","chenyueli")
新arr:George,John,William,chenyueli,Thomas,James,Adrew,Martin

</pre>

### 4、数组元素的删除 pop() shift() splice()
arrayObj.pop(); //移除最后一个元素并**返回该元素值**

arrayObj.shift(); //移除最前一个元素并**返回该元素值**，数组中元素自动前移

arrayObj.splice(deletePos,deleteCount); //删除从指定位置deletePos开始的指定数量deleteCount的元素，**数组形式返回所移除的元素**

注意：**delete** 删除数组元素时位置仍保留

	var x = [1,2,3];
	x.length   //->3
	delete x[1];
	x.length  //->3
	x[1] //->undefined

### 5、数组的截取和合并 slice() concat()
arrayObj.slice(start, [end]); //以数组的形式返回数组的一部分，注意不包括 end 对应的元素，如果省略 end 将复制 start 之后的所有元素,返回一个截取的新数组，原数组不变。

arrayObj.concat([item[, item[, . . . [,itemN]]]]); //将多个数组（也可以是字符串，或者是数组和字符串的混合）连接为一个数组，返回连接好的新的数组

<pre>
var x = [1,2,3,4,5,6];
var y = x.slice(1,3);

y -> [2,3,4];
x -> [1,2,3,4,5,6]

</pre>

concat() 方法用于连接两个或多个数组。

var x = [1,2,3];
var y = x.concat(4,5);

y -> [1,2,3,4,5]
x -> [1,2,3]

### 6、数组的拷贝 slice()
arrayObj.slice(); //返回数组的拷贝数组，注意是一个新的数组，原数组不变

arrayObj.concat(); 

### 7、数组元素的排序 sort() reverse()
arrayObj.reverse(); //反转元素（最前的排到最后、最后的排到最前），返回数组地址

arrayObj.sort(); //对数组元素排序，返回数组地址

<pre>
sort() 方法用于对数组的元素进行排序。

arrayObject.sort(sortby)
sortby:可选。规定排序顺序。必须是函数。
如果调用该方法时没有使用参数，将按字母顺序对数组中的元素进行排序

function sortNumber(a,b)
{
//从大到小排序
return b - a
}

function sortNumber(a,b)
{
//从小到大排序
return a - b
}
var arr = new Array(6)
arr[0] = "10"
arr[1] = "5"
arr[2] = "40"
arr[3] = "25"
arr[4] = "1000"
arr[5] = "1"
arr.sort(sortNumber)

-> 10,5,40,25,1000,1
-> 1,5,10,25,40,1000
</pre>
### 8、数组元素的字符串化 join()
arrayObj.join(separator); //返回字符串，这个字符串将数组的每一个元素值连接在一起，中间用 separator 隔开。
`arr.join("|") -> "George|John|Thomas"`

toLocaleString 、toString 、valueOf：可以看作是join的特殊用法，不常用

### 9、 数组元素的遍历

1. for 循环遍历下标连续的数组
2. for-in遍历数组
3. arr.forEach(function(value[,index[,array]]){函数体})

	var x = [1,2,4];
	x.forEach(function(value,index,array){console.log(array[index] + " = " +value)});


对比jQuery中的$.each方法：

	$.each([], function(index, value, array) {
	    // ...
	});
会发现，第1个和第2个参数正好是相反的，不要记错了。

另外，forEach不会遍历纯粹“占着官位吃空饷”的元素的，如delete后的undefined元素；

### 10、 map数组映射

原数组被“映射”成对应新数组，返回新的数组,原数组不变。callback需要有return值，否则数组所有项都被映射成了undefined

	var users = [
	  {name: "张含韵", "email": "zhang@email.com"},
	  {name: "江一燕",   "email": "jiang@email.com"},
	  {name: "李小璐",  "email": "li@email.com"}
	];
	
	var emails = users.map(function (user) { return user.email; });
	
	console.log(emails.join(", ")); // zhang@email.com, jiang@email.com, li@email.com

### 10、 reduce数组
用于数组求和，将[1,3,5,7]变成1357，利用reduce()求积等

	var x = [1,2,3];
	x.reduce(function (x, y) {
	        return x * y;
	});
	
	-> 6

## 二、数组对象的3个属性
### 1、length 属性
Length属性表示数组的长度，即其中元素的个数。因为数组的索引总是由0开始，所以一个数组的上下限分别是：0和length-1。和其他大多数语言不同的是，**JavaScript数组的length属性是可变的**，这一点需要特别注意。

- 当length属性被设置得更大时，整个数组的状态事实上不会发生变化，仅仅是length属性变大；
- 当length属性被设置得比原来小时，则原先数组中索引大于或等于length的元素的值全部被丢失。

### 2、prototype 属性
返回对象类型原型的引用。使您有能力向对象添加属性和方法。
`objectName.prototype`

	function array_max()
	{
	var i,
	max = this[0];
	for (i = 1; i < this.length; i++)
	{
	if (max < this[i])
	max = this[i];
	}
	return max;
	}
	Array.prototype.max = array_max;
	var x = new Array(1, 2, 3, 4, 5, 6);
	var y = x.max();


### 3、constructor 属性
<pre>
y = new Array();
if (y.constructor == Array) // 进行处理（条件为真）
</pre>
来源：[详解JS数组的操作大全](http://www.jb51.net/article/73598.htm)

[ES5中新增的Array方法详细说明](http://www.zhangxinxu.com/wordpress/2013/04/es5%E6%96%B0%E5%A2%9E%E6%95%B0%E7%BB%84%E6%96%B9%E6%B3%95/)