---
layout: post
title: "react系列笔记（2）—— React使用思考"
date: 2017-06-28
excerpt: ""
tag:
- React.js
- Redux

comments: false
---


### 二、 React-Router

react-router  "^4.1.1"

####1. 安装

	npm install react-router-dom --save
	
#### 2. 在react根文件夹中引用配置路由
	
	import React from 'react'
	import ReactDOM from 'react-dom'
	import { BrowserRouter as Router, Route } from 'react-router-dom'
	
	import createBrowserHistory from 'history/createBrowserHistory'
	
	import Portal from '../containers/main'
	import Admin from '../containers/admin'
	
	const history = createBrowserHistory()
	
	ReactDOM.render(
	  <Router history={history}>
	    <div>
	      <Route exact path="/" component={Portal}/>
	      <Route path="/admin" component={Admin}/>
	    </div>
	  </Router>,
	  document.getElementById('root')
	)
	
####3. 路由跳转

	import { Link } from 'react-router-dom'
	<Link to="/">Home</Link>
	
<a href="https://reacttraining.com/react-router/web/example/basic">React-router官方文档</a>


###二、 Redux
新建 reducers|store|actions|三个文件夹

代码如下： 
reducer/index.js

	import { routerReducer as routing } from 'react-router-redux'
	import { combineReducers } from 'redux'
	import home from './home'
	
	const rootReducer = combineReducers({
	  home,
	  routing
	})
	
	export default rootReducer

reducer/home.js

	/**
	 * home reducer
	 */
	import cloneDeep from 'lodash.clonedeep'
	import { types } from '../actions/action-types'
	
	//初始化 home state
	const initialState = {
	  isLoading: true
	}
	
	export default function app(state = initialState, action) {
	  const cloneState = cloneDeep(state)
	  switch (action.type) {
	    case types.UPDATE_START:
	      return Object.assign({}, cloneState, { isLoading: action.isLoading })
	    default:
	      return cloneState
	    }
	}

store/config-store.js

	import { createStore, applyMiddleware, compose } from 'redux'
	import thunk from 'redux-thunk'
	import { browserHistory } from 'react-router'
	import { routerMiddleware } from 'react-router-redux'
	import { createLogger } from 'redux-logger'
	import rootReducer from '../reducers'
	
	const logger = createLogger()
	
	const router = routerMiddleware(browserHistory)
	
	const enhancer = compose(
	  applyMiddleware(thunk, router, logger)
	)
	const initialState = {
	}
	const store = createStore(rootReducer, initialState, enhancer)
	
	export default store

actions/action-types.js

	export const types = {
	  /* 开始更新状态 */
	  UPDATE_START: 'UPDATE_START'
	}
	
actions/app.js

	import { types } from './action-types'
	
	//获取数据列表
	export function sayHello(isLoading){
	  return (dispatch) => {
	    dispatch({ type: types.UPDATE_START, isLoading })
	    return null
	  }
	}
	
在容器组建中用`connect`即可访问redux中的内容

代码如下：

	import React, { Component } from 'react'
	import Container from '../components/users/main'
	
	//redux
	import { bindActionCreators } from 'redux'
	import { connect } from 'react-redux'
	import * as actions from '../actions/app'
	
	
	class Main extends Component {
	
	  render() {
	    const { isLoading, sayHello } = this.props
	    return <Container sayHello={sayHello} isLoading={isLoading} />
	  }
	}
	
	//redux
	function mapStateToProps(state) {
	  return Object.assign({}, {
	    isLoading: state.home.isLoading,
	  })
	}
	
	function mapDispatchToProps(dispatch) {
	  return bindActionCreators(actions, dispatch)
	}
	
	export default connect(mapStateToProps, mapDispatchToProps)(Main)

至此，一个完整的框架react+redux+react-router+koa2 搭建完成

### 4. ant-design API
安装：

	npm install antd --save

按需引入：
	
	import { DatePicker } from 'antd'
	
提示：You are using a whole package of antd, please use https://www.npmjs.com/package/babel-plugin-import to reduce app bundle size.

为减小包，采用新的调用方式：


	var DatePicker = require('antd/lib/date-picker');

调用：
	
	<DatePicker />	
	
	
### 5. mock.js

	
	
	
	
https://www.npmjs.com/package/babel-plugin-import
#### 3.
一、如何理解React单向数据流？和Vue.js双向数据绑定的优劣，各适用于什么场景？

一、如何理解React的性能提升？

   组建的生命周期
   组建渲染
    虚拟DOM	
    
一、Redux + react-redux？

Redux给开发页面带来什么好处？何时使用redux?
如何理解 “容器组建” 和 “展示组建”
如何优雅地书写react代码

减少非必需DOM(举个栗子)