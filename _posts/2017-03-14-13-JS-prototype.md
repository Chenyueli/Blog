---
layout: post
title: "深入理解js继承"
date: 2017-03-19
excerpt: "js作用域、原型链、构造函数、原型式继承、寄生式继承、寄生组合式继承"
tag:
- javascript

comments: false
---
### 如何解决原型中包含引用类型值的问题






来源：
<a href = "http://www.51xuediannao.com/qd63/index.php/page-2-104-1.html" target = "_blank">js apply和js call方法详解</a>

## js的解析与执行过程
### 1. js的作用域

- 函数作用域：函数内部变量只在内部作用。js满足
- 静态作用域：闭包/词法作用域，**声明时确定**的作用域。,js满足
- 块作用域：{}大括号包含的。js不满足
- 动态作用域：运行时可访问内部变量,运行时确定。js不满足


javascript的作用域为词法作用域（也称静态作用域）。在词法解析阶段，就已经确定了相关的作用域。作用域还会形成一个相关的链条，我们称之为作用域链。
### 2. 全局函数预处理和执行

预处理：创建一个词法环境（LexicalEnvironment，简写为LE），扫描JS中的**用声明的方式声明的函数**(（不是函数表达式）)，**用var定义的变量**并将它们加到预处理阶段的词法环境中去。**处理函数声明有冲突时，会覆盖；处理变量声明有冲突时，会忽略。**

### 3. 函数中的解析和执行过程

函数中的解析和执行过程的区别不是很大，但是函数中有个`arguments`保存实参数量。

### 4. 应用：如果有多个函数都想要一个变量，



-  方法1：将变量设置为全局变量，增加了全局用量，不推荐。
-  方法2：使用匿名函数的方法，推荐。

实例如下：

	(function(){
	    var a = 1,
	        b = 2;
	    function f(){
	        alert(a);
	    }
	    window.f = f;
	})();
	f();
	//结果为：1

来源：<a href = "http://www.cnblogs.com/foodoir/p/5977950.html" target = "_blank">js的解析与执行过程</a>






学习资源：

<a href = "http://www.maiziedu.com/course/583/" target = "_blank">
JavaScript面向对象编程(麦子学院)</a>



## 事件作用域问题：

事件内定义变量，在事件结束销毁（再次进入时间时，改变）

事件外变量，累加

如果传入的是对象，则元素对象累加，将导致多个对象同时变化



1. 如何给事件传参；
2. 事件如何返回值；

### 事件的内存和性能：

js中添加到页面的时间处理程序数量将直接关系到页面的整体运行性能，原因：

1. 每个函数都是对象，都会占用内存，内存对象越多，性能越差；
2. 必须事先指定所有事件处理程序而导致：`DOM访问次数`，会延迟整个页面交互就绪时间。


解决方法：

- 方法1 ：事件委托。限制建立连接数量，占用更少内存，提高性能。
- 方法2：手动移除时间处理程序，减少链接数量，确保内存可以再次被利用。

具体实现：

- 用innerHTML删除元素前将元素解绑
- 纯Dom操作移除  removeChild()等已将事件解绑，无需再解绑

